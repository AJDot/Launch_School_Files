<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>Practice</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/handlebars.js/4.0.11/handlebars.min.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
  </head>
  <body>
    <form action="index.html" method="post">
      <fieldset>
        <input type="text" name="name" value="Alex">
        <input type="number" name="number" value="10">
        <input type="email" name="email" value="ex@ample.com">
        <textarea name="textarea" rows="8" cols="80">Text in a textarea.</textarea>
        <select name="select" multiple>
          <option value="1">1</option>
          <option value="2" selected>2</option>
          <option value="3">3</option>
          <option value="4">4</option>
        </select>
        <label><input type="radio" name="radio" value="Red">Red</label>
        <label><input type="radio" name="radio" value="Green" checked>Green</label>
        <label><input type="radio" name="radio" value="Blue">Blue</label>
        <label><input type="radio" name="radio" value="Yellow">Yellow</label>
      </fieldset>
      <button type="submit" name="serialize">Serialize Form</button>
    </form>
    <main>
    </main>

    <script id="form_output_template" type="text/x-handlebars">
      <ul>
        {{#each items}}
        <li>{{@key}}: {{this}}</li>
        {{/each}}
      </ul>
    </script>
    <script>
      var $f = $('form');

      var processForm = function($form) {
        result = {};
        $form.serializeArray().forEach(function(item) {
          if (result.hasOwnProperty(item.name)) {
            if (Array.isArray(result[item.name])) {
              result[item.name].push(item.value);
            } else {
              result[item.name] = [result[item.name], item.value];
            }
          } else {
            result[item.name] = item.value;
          }
        });
        return result;
      }

      var template = Handlebars.compile($('#form_output_template').html());

      function serialize(e) {
        e.preventDefault();
        $('main').html(template({ items: processForm($f) }));
      }

      $('button').on('click', serialize);



function extend(destination) {
  var sources = [].slice.call(arguments, 1);

  sources.forEach(function(source) {
    Object.getOwnPropertyNames(source).forEach(function(prop) {
      destination[prop] = source[prop];
    });
  });

  return destination;
}

var foo = {
  a: 0,
  b: {
    x: 1,
    y: 2
  }
};

var joe = {
  name: 'Joe'
};

var funcs = {
  sayHello: function() {
    console.log('Hello, ' + this.name);
  },
  sayGoodBye: function() {
    console.log('Goodbye, ' + this.name);
  }
};

var object = extend({}, foo, joe, funcs);

console.log(object.b.x);          // 1
object.sayHello();                // Hello, Joe
    </script>
  </body>
</html>
